/* terminal dungeon: text dominates, mouse-only Q/A, palette rotates on every click */
:root{
  --black:#050505; --green:#00a651; --white:#f3f6f2;
  --bg:var(--black); --fg:var(--green); --btnbg:var(--white); --btnfg:var(--black);
  --shadow: 0 0 10px rgba(0,0,0,.35);
  --border: rgba(243,246,242,.18);
  --panel: rgba(0,0,0,.55); --panel2: rgba(0,0,0,.30);
  --mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"DejaVu Sans Mono",monospace;
}
html,body{height:100%;margin:0}
body{background:var(--bg);color:var(--fg);font-family:var(--mono);overflow:hidden;transition:background-color 160ms linear,color 160ms linear;text-shadow:var(--shadow)}
#screen{position:fixed;inset:0;display:grid;place-items:center;padding:18px}
#term{position:relative;width:min(1120px,100%);height:min(88vh,900px);display:flex;flex-direction:column;border:1px solid var(--border);border-radius:18px;background:linear-gradient(180deg,var(--panel),var(--panel2));box-shadow:0 0 44px rgba(0,0,0,.48);overflow:hidden}
#hud{display:flex;justify-content:space-between;align-items:baseline;gap:16px;padding:12px 14px 10px 14px;border-bottom:1px solid var(--border)}
#brand{font-weight:900;letter-spacing:.08em;text-transform:uppercase;font-size:22px}
#state{font-size:12px;opacity:.85;line-height:1.25;text-align:right;max-width:65%;color:color-mix(in oklab,var(--fg) 60%, var(--white))}
#buffer{flex:1;overflow:auto;padding:16px 16px 18px 16px;background:rgba(0,0,0,.12)}
.line{margin:0 0 10px 0;line-height:1.55;color:color-mix(in oklab,var(--white) 86%, transparent)}
body[data-ink="dark"] .line{color:rgba(5,5,5,.92)}
.line .spk{font-weight:900;color:var(--fg)}
.line.stage{opacity:.88;border-left:3px solid var(--fg);padding-left:10px}
.line.hackled{border-left:3px dashed var(--fg);padding-left:10px}
#oracle{padding:12px 14px 14px 14px;border-top:1px solid var(--border);background:rgba(0,0,0,.10)}
#q{font-size:14px;opacity:.92;margin-bottom:10px;line-height:1.35}
#choices{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
.choice{cursor:pointer;user-select:none;padding:12px 12px;border-radius:12px;border:1px solid var(--border);background:var(--btnbg);color:var(--btnfg);font-weight:800;letter-spacing:.02em;transition:transform 90ms ease,filter 120ms ease,background-color 160ms linear,color 160ms linear,border-color 160ms linear;text-shadow:var(--shadow)}
.choice:hover{filter:brightness(1.03)} .choice:active{transform:translateY(1px)}
#viewer{position:absolute;z-index:3;inset:54px 16px 16px 16px;border:1px solid var(--border);border-radius:16px;background:linear-gradient(180deg,rgba(0,0,0,.62),rgba(0,0,0,.35));box-shadow:0 0 22px rgba(0,0,0,.55);display:flex;flex-direction:column;gap:10px;padding:12px;backdrop-filter:blur(2px)}
#viewer[aria-hidden="true"]{display:none}
#viewer-head{display:flex;justify-content:space-between;align-items:baseline;gap:12px;padding-bottom:8px;border-bottom:1px solid var(--border)}
#viewer-title{font-weight:900;letter-spacing:.06em;text-transform:uppercase;font-size:14px}
#viewer-meta{font-size:12px;opacity:.75;max-width:60%;text-align:right}
#viewer-body{flex:1;overflow:auto;background:rgba(0,0,0,.15);border-radius:12px;padding:10px}
#viewer-text{margin:0;font-family:var(--mono);font-size:13px;line-height:1.5;white-space:pre-wrap;word-break:break-word}
#viewer-frame{width:100%;height:100%;border:0;border-radius:10px;background:rgba(0,0,0,.2)}
#viewer-actions{display:flex;gap:10px;flex-wrap:wrap}
.vbtn{cursor:pointer;user-select:none;padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:var(--btnbg);color:var(--btnfg);font-weight:800;letter-spacing:.02em;transition:transform 90ms ease,filter 120ms ease,background-color 160ms linear,color 160ms linear,border-color 160ms linear;text-shadow:var(--shadow);font-size:12px}
.vbtn:hover{filter:brightness(1.03)} .vbtn:active{transform:translateY(1px)}
#crt{position:fixed;inset:0;pointer-events:none;opacity:.55;mix-blend-mode:screen;background:radial-gradient(1200px 700px at 50% 12%,rgba(0,255,128,.22),transparent 70%),radial-gradient(900px 520px at 18% 88%,rgba(243,246,242,.10),transparent 72%),linear-gradient(to bottom,rgba(0,0,0,0) 0%,rgba(0,0,0,.24) 62%,rgba(0,0,0,.46) 100%)}
#scan{position:fixed;inset:0;pointer-events:none;opacity:.22;mix-blend-mode:multiply;background:repeating-linear-gradient(to bottom,rgba(0,0,0,0) 0px,rgba(0,0,0,0) 2px,rgba(0,0,0,.22) 3px)}
body.morph #term{transform:scale(0.997);filter:blur(0.35px) contrast(1.05)}
@media (max-width:720px){
  #choices{grid-template-columns:1fr}
  #state{max-width:55%}
  #viewer{inset:62px 12px 12px 12px}
}
